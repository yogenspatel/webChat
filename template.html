<!DOCTYPE html>
<html>
	<head>
		<title>Chat Server</title>
		<style type="text/css">
		#log {
			margin-bottom: 100px;
			width: 100%;
		}
		#log ul {
			padding: 0px;
			margin: 0px;
		}
		#log ul li{
			list-style-type: none;
		}
		#console {
			border: 1px solid #CCC;
			position: fixed;
			bottom: 0px;
			width: 100%;
			font-size: 16px;
		}
		#console input{ width: 100%;}
		</style>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
		<script type="text/javascript" src="/socket.io/socket.io.js"></script>
		<script type="text/javascript">
			$(function(){
				var socket = io.connect('http://chatyogen.herokuapp.com:4000');
				//var socket = new io.Socket('localhost', {port: 4000});
				//console.log(socket);
				//socket.connect();
				//console.log('connecting...');
				//socket.on('connect', function() {
				//	console.log('connecting..........');
				//});
				socket.on('message', function(msg) {
					$('#log ul').append('<li>' + msg.data + '</li>');
					window.scrollBy(0, 1000000000000);
					$('#entry').focus();
				});

				$('#entry').keypress(function(event) {
					if(event.keyCode == 13) {
						var msg = $('#entry').val();
						if(msg) {
							socket.emit('emitData', { data: msg });
							$('#entry').val('');
						}
					}
				});

			});
		</script>
		
	</head>
	<body>
		<h1>Welcome to Chat Server !</h1>
		<h2>Please Enter your User name: </h2>
		<div id="log"><ul></ul></div>
		<div id="console">
			<input type="text" id="entry" />
		</div>
	</body>
</html>